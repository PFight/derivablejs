<html><head><title>Havelock API Documentation</title><meta name="viewport"content="width=device-width, initial-scale=1"/><link rel="stylesheet"type="text/css"href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/default.min.css"/><script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="js/sticky.js"></script><link rel="stylesheet"type="text/css"href="http://fonts.googleapis.com/css?family=Source+Code+Pro:400,700"/><link rel="stylesheet"type="text/css"href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"/><link rel="stylesheet"type="text/css"href="http://fonts.googleapis.com/css?family=Questrial"/><link rel="stylesheet"type="text/css"href="css/font-awesome.min.css"/><link rel="stylesheet"type="text/css"href="css/normalize.css"/><link rel="stylesheet"type="text/css"href="css/custom.css"/></head><body><div class="container"><div class="header"><h1 class="title">Havelock API</h1><h1 class="github pull-right"><a href="https://github.com/ds300/havelock"><i class="fa fa-github"></i></a></h1></div><div id="toc"><ul><li class="subheading">Interfaces</li><li class="interface"><a href="#havelock-Derivable">Derivable</a><ul><li class="method"><a href="#havelock-Derivable-derive">.derive</a></li><li class="method"><a href="#havelock-Derivable-reaction">.reaction</a></li><li class="method"><a href="#havelock-Derivable-react">.react</a></li><li class="method"><a href="#havelock-Derivable-get">.get</a></li><li class="method"><a href="#havelock-Derivable-is">.is</a></li><li class="method"><a href="#havelock-Derivable-and">.and</a></li><li class="method"><a href="#havelock-Derivable-or">.or</a></li><li class="method"><a href="#havelock-Derivable-then">.then</a></li><li class="method"><a href="#havelock-Derivable-not">.not</a></li><li class="method"><a href="#havelock-Derivable-switch">.switch</a></li></ul></li><li class="interface"><a href="#havelock-Mutable">Mutable</a><ul><li class="method"><a href="#havelock-Mutable-set">.set</a></li><li class="method"><a href="#havelock-Mutable-swap">.swap</a></li><li class="method"><a href="#havelock-Mutable-lens">.lens</a></li></ul></li><li class="interface"><a href="#havelock-LensDescriptor">LensDescriptor</a><ul><li class="method"><a href="#havelock-LensDescriptor-get">.get</a></li><li class="method"><a href="#havelock-LensDescriptor-set">.set</a></li></ul></li><li class="interface"><a href="#havelock-Atom">Atom</a></li><li class="interface"><a href="#havelock-Reaction">Reaction</a><ul><li class="method"><a href="#havelock-Reaction-start">.start</a></li><li class="method"><a href="#havelock-Reaction-stop">.stop</a></li><li class="method"><a href="#havelock-Reaction-force">.force</a></li></ul></li></ul></div><div class="page"><div class="module"><a id="havelock"></a><h2 class="code">module <span class="name">havelock</span></h2><div class="docs"><p>Havelock is an holistic state management library. This is its API documentation.</p></div><div class="interface"><a id="havelock-Derivable"></a><h3 class="code">interface <span class="name">Derivable<span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></h3><div class="docs">A thing that is derivable</div><div class="method"><a id="havelock-Derivable-derive"></a><h4 class="code"><span class="name">.derive<span><span class="punct">&lt;</span><span class="type"><span class="type-args">E</span></span><span class="punct">&gt;</span></span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="name">value</span><span class="punct">: </span><span class="type"><span class="type-args">T</span></span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type"><span class="type-args">E</span></span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Derivable">Derivable</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">E</span></span><span class="punct">&gt;</span></span></span></h4><div class="docs"><p>Creates a new derivation based on the application of <code>f</code> to the current value of this derivable. e.g.</p><pre><code class="javascript">const x = atom&#40;4&#41;;
const timesTwo = &#40;n&#41; =&gt; n &#42; 2;
const xTimesTwo = x.derive&#40;timesTwo&#41;;

xTimesTwo.get&#40;&#41;;
// =&gt; 8
</code></pre></div></div><div class="method"><a id="havelock-Derivable-reaction"></a><h4 class="code"><span class="name">.reaction</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">r</span><span class="punct">: </span><span class="type"><a href="#havelock-Reaction">Reaction</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Reaction">Reaction</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></h4><div class="docs"><p>Creates a link between <code>r</code> and this derivable. <code>r</code> should be a 'fresh' reaction. i.e. it should not have been linked to any other derivable in the past. For examples see <a class="code" href="#havelock-Reaction">Reaction</a></p></div></div><div class="method"><a id="havelock-Derivable-reaction"></a><h4 class="code"><span class="name">.reaction</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="name">value</span><span class="punct">: </span><span class="type"><span class="type-args">T</span></span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type"><span class="builtin-type">void</span></span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Reaction">Reaction</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></h4><div class="docs"><p>Creates a new reaction based on <code>f</code> being applied to this derivable. e.g.</p><pre><code class="javascript">const x = atom&#40;4&#41;;
const r = x.reaction&#40;x =&gt; console.log&#40;`x is`, x&#41;&#41;;

x.set&#40;8&#41;;

// .reaction creats the reaction, but doesn't start it, so nothing gets
// printed yet

r.start&#40;&#41;;

// now that the reaction has started it will respond to changes in x

x.set&#40;16&#41;;
// $&gt; x is 16

x.set&#40;32&#41;;
// $&gt; x is 32
</code></pre></div></div><div class="method"><a id="havelock-Derivable-react"></a><h4 class="code"><span class="name">.react</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">r</span><span class="punct">: </span><span class="type"><a href="#havelock-Reaction">Reaction</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Reaction">Reaction</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></h4><div class="docs"><p>Creates a link between the given reaction and this derivable. Starts and forces the reaction before returning it. i.e.</p><pre><code class="javascript">derivable.react&#40;r&#41;;
</code></pre><p>is equivalent to</p><pre><code class="javascript">derivable.reaction&#40;r&#41;.start&#40;&#41;.force&#40;&#41;;
</code></pre></div></div><div class="method"><a id="havelock-Derivable-react"></a><h4 class="code"><span class="name">.react</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="name">value</span><span class="punct">: </span><span class="type"><span class="type-args">T</span></span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type"><span class="builtin-type">void</span></span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Reaction">Reaction</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></h4><div class="docs"><p>Creates a new reaction based on <code>f</code> being applied to this derivable. Starts and forces the reaction before returning it. i.e.</p><pre><code class="javascript">derivable.react&#40;f&#41;;
</code></pre><p>is equivalent to</p><pre><code class="javascript">derivable.reaction&#40;f&#41;.start&#40;&#41;.force&#40;&#41;;
</code></pre></div></div><div class="method"><a id="havelock-Derivable-get"></a><h4 class="code"><span class="name">.get</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><span class="type-args">T</span></span></h4><div class="docs"><p>Returns the current value of this derivable.</p><pre><code class="javascript">const x = atom&#40;`a string`&#41;;
x.get&#40;&#41;;
// =&gt; 'a string'
</code></pre></div></div><div class="method"><a id="havelock-Derivable-is"></a><h4 class="code"><span class="name">.is</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">other</span><span class="punct">: </span><span class="type"><span class="builtin-type">any</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Derivable">Derivable</a><span><span class="punct">&lt;</span><span class="type"><span class="builtin-type">boolean</span></span><span class="punct">&gt;</span></span></span></h4><div class="docs"><p>Returns a derivable which represents the equality of the values held in this and <code>other</code>.</p><pre><code class="javascript">let a = atom&#40;`a`&#41;,
    b = atom&#40;`b`&#41;;

let same = a.is&#40;b&#41;;

same.get&#40;&#41;;
// =&gt; false

b.set&#40;`a`&#41;;

same.get&#40;&#41;;
// =&gt; true
</code></pre></div></div><div class="method"><a id="havelock-Derivable-and"></a><h4 class="code"><span class="name">.and</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">other</span><span class="punct">: </span><span class="type"><span class="builtin-type">any</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Derivable">Derivable</a><span><span class="punct">&lt;</span><span class="type"><span class="builtin-type">any</span></span><span class="punct">&gt;</span></span></span></h4><div class="docs"><p>Returns a derivable which represents the boolean AND composition of the values held in this and <code>other</code>.</p><pre><code class="javascript">const condition = atom&#40;`truthy value`&#41;;

const result = condition.and&#40;`yes truthy`&#41;;

result.get&#40;&#41;;
// =&gt; `yes truthy`

condition.set&#40;false&#41;;

result.get&#40;&#41;;
// =&gt; false
</code></pre><p><code>other</code> can be a derivable.</p><pre><code class="javascript">const result2 = result.and&#40;condition.derive&#40;s =&gt; s.split&#40;` `&#41;&#91;0&#93;&#41;&#41;;

result2.get&#40;&#41;;
// =&gt; false

condition.set&#40;`some string`&#41;;

result2.get&#40;&#41;;
// =&gt; `some`
</code></pre><p>Due to havelock's laziness, we can be sure that the derivation of <code>condition</code> (the string splitting bit) will only ever be evaluated when <code>condition</code> contains a truthy value.</p></div></div><div class="method"><a id="havelock-Derivable-or"></a><h4 class="code"><span class="name">.or</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">other</span><span class="punct">: </span><span class="type"><span class="builtin-type">any</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Derivable">Derivable</a><span><span class="punct">&lt;</span><span class="type"><span class="builtin-type">any</span></span><span class="punct">&gt;</span></span></span></h4><div class="docs"><p>Returns a derivable which represents the boolean OR composition of the values held in this and <code>other</code>.</p><pre><code class="javascript">const first = atom&#40;`truthy value`&#41;;
const second = atom&#40;false&#41;;

first.or&#40;second&#41;.get&#40;&#41;;
// =&gt; `truthy value`

second.or&#40;first&#41;.get&#40;&#41;;
// =&gt; `truthy value`

first.set&#40;false&#41;;

second.or&#40;first&#41;.get&#40;&#41;;
// =&gt; false

first.set&#40;`first`&#41;;
second.set&#40;`second`&#41;;

first.or&#40;second&#41;.get&#40;&#41;;
// =&gt; `first`

second.or&#40;first&#41;.get&#40;&#41;;
// =&gt; `second`
</code></pre></div></div><div class="method"><a id="havelock-Derivable-then"></a><h4 class="code"><span class="name">.then</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">thenD</span><span class="punct">: </span><span class="type"><span class="builtin-type">any</span></span></span><span class="punct">, </span><span class="param"><span class="name">elseD</span><span class="punct">: </span><span class="type"><span class="builtin-type">any</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Derivable">Derivable</a><span><span class="punct">&lt;</span><span class="type"><span class="builtin-type">any</span></span><span class="punct">&gt;</span></span></span></h4><div class="docs"><p>Returns a derivable which represents the value of <code>thenD</code> if this is truthy, or <code>elseD</code> otherwise.</p><p>Equivalent to:</p><pre><code class="javascript">this.and&#40;thenD&#41;.or&#40;elseD&#41;;
</code></pre></div></div><div class="method"><a id="havelock-Derivable-not"></a><h4 class="code"><span class="name">.not</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Derivable">Derivable</a><span><span class="punct">&lt;</span><span class="type"><span class="builtin-type">boolean</span></span><span class="punct">&gt;</span></span></span></h4><div class="docs"><p>Returns a derivable which represents the boolean complement of the truthiness of the the value represented by this.</p><p>Equivalent to:</p><pre><code class="javascript">this.derive&#40;x =&gt; !x&#41;;
</code></pre></div></div><div class="method"><a id="havelock-Derivable-switch"></a><h4 class="code"><span class="name">.switch</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">...args</span><span class="punct">: </span><span class="type"><span class="builtin-type">any</span><span class="punct">[]</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Derivable">Derivable</a><span><span class="punct">&lt;</span><span class="type"><span class="builtin-type">any</span></span><span class="punct">&gt;</span></span></span></h4><div class="docs"><p>Args is a flat list of (comparatee, value) pairs. If the value represented by this derivable is equal to a comparatee (which can be derivable or not), a derivable representing the comparatee's corresponding value is returned. If none match, the value represented is <code>undefined</code> unless a trailing value is supplied.</p><pre><code class="javascript">const x = atom&#40;3&#41;;

const y = x.switch&#40;
  1, `one`,
  2, `two`,
  3, `three`
&#41;;

y.get&#40;&#41;;
// =&gt; `three`

x.set&#40;4&#41;;

y.get&#40;&#41;;
// =&gt; undefined

const z = x.switch&#40;
  5, `five`,
  6, `six`,
  `other`
&#41;;

z.get&#40;&#41;;
// =&gt; `other`
</code></pre></div></div></div><div class="interface"><a id="havelock-Mutable"></a><h3 class="code">interface <span class="name">Mutable<span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></h3><div class="docs">Mutable interface yo see <a class="code" href="#havelock-Derivable">Derivable</a></div><div class="method"><a id="havelock-Mutable-set"></a><h4 class="code"><span class="name">.set<span><span class="punct">&lt;</span><span class="type"><span class="type-args">E</span></span><span class="punct">&gt;</span></span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">value</span><span class="punct">: </span><span class="type"><span class="type-args">E</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Mutable">Mutable</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">E</span></span><span class="punct">&gt;</span></span></span></h4></div><div class="method"><a id="havelock-Mutable-swap"></a><h4 class="code"><span class="name">.swap<span><span class="punct">&lt;</span><span class="type"><span class="type-args">E</span></span><span class="punct">&gt;</span></span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="name">value</span><span class="punct">: </span><span class="type"><span class="type-args">T</span></span></span><span class="punct">, </span><span class="param"><span class="name">...args</span><span class="punct">: </span><span class="type"><span class="builtin-type">any</span><span class="punct">[]</span></span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type"><span class="type-args">E</span></span></span></span><span class="punct">, </span><span class="param"><span class="name">...args</span><span class="punct">: </span><span class="type"><span class="builtin-type">any</span><span class="punct">[]</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Mutable">Mutable</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">E</span></span><span class="punct">&gt;</span></span></span></h4></div><div class="method"><a id="havelock-Mutable-lens"></a><h4 class="code"><span class="name">.lens<span><span class="punct">&lt;</span><span class="type"><span class="type-args">E</span></span><span class="punct">&gt;</span></span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">descriptor</span><span class="punct">: </span><span class="type"><a href="#havelock-LensDescriptor">LensDescriptor</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">, </span><span class="type"><span class="type-args">E</span></span><span class="punct">&gt;</span></span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><span class="builtin-type">Lens</span><span><span class="punct">&lt;</span><span class="type"><span class="type-args">E</span></span><span class="punct">&gt;</span></span></span></h4></div></div><div class="interface"><a id="havelock-LensDescriptor"></a><h3 class="code">interface <span class="name">LensDescriptor<span><span class="punct">&lt;</span><span class="type"><span class="type-args">ParentType</span></span><span class="punct">, </span><span class="type"><span class="type-args">ChildType</span></span><span class="punct">&gt;</span></span></span></h3><div class="docs">Lens Descriptors are some whack jazz</div><div class="method"><a id="havelock-LensDescriptor-get"></a><h4 class="code"><span class="name">.get</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">source</span><span class="punct">: </span><span class="type"><span class="type-args">ParentType</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><span class="type-args">ChildType</span></span></h4></div><div class="method"><a id="havelock-LensDescriptor-set"></a><h4 class="code"><span class="name">.set</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="name">source</span><span class="punct">: </span><span class="type"><span class="type-args">ParentType</span></span></span><span class="punct">, </span><span class="param"><span class="name">value</span><span class="punct">: </span><span class="type"><span class="type-args">ChildType</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><span class="type-args">ParentType</span></span></h4></div></div><div class="interface"><a id="havelock-Atom"></a><h3 class="code">interface <span class="name">Atom<span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></h3><h4 class="code"><span class="punct">extends </span><span class="type"><a href="#havelock-Derivable">Derivable</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span><span class="punct">, </span><span class="type"><a href="#havelock-Mutable">Mutable</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></h4><div class="docs">blub</div></div><div class="interface"><a id="havelock-Reaction"></a><h3 class="code">interface <span class="name">Reaction<span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></h3><div class="docs">blub</div><div class="method"><a id="havelock-Reaction-start"></a><h4 class="code"><span class="name">.start</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Reaction">Reaction</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></h4></div><div class="method"><a id="havelock-Reaction-stop"></a><h4 class="code"><span class="name">.stop</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Reaction">Reaction</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></h4></div><div class="method"><a id="havelock-Reaction-force"></a><h4 class="code"><span class="name">.force</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><a href="#havelock-Reaction">Reaction</a><span><span class="punct">&lt;</span><span class="type"><span class="type-args">T</span></span><span class="punct">&gt;</span></span></span></h4></div></div></div></div></div></body></html>